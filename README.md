
# üß≠ B‚Äëspline Tracer ‚Äî PNG ‚Üí –ö–æ–Ω—Ç—É—Ä ‚Üí B‚Äëspline ‚Üí SVG/JSON

–ó–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –Ω–∞ **Streamlit**, —è–∫–∏–π:
- –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î PNG/JPG (—á/–± –∞–±–æ –∫–æ–ª—å–æ—Ä–æ–≤—ñ),
- –≤–∏–¥—ñ–ª—è—î –∫–æ–Ω—Ç—É—Ä(–∏) —á–µ—Ä–µ–∑ *marching squares*,
- –ø—ñ–¥–≥–∞–Ω—è—î **–ø–µ—Ä—ñ–æ–¥–∏—á–Ω–∏–π B‚Äëspline** (—Å—Ç—É–ø—ñ–Ω—å 2‚Äì5, –∑–≥–ª–∞–¥–∂—É–≤–∞–Ω–Ω—è `s`),
- –≤—ñ–∑—É–∞–ª—ñ–∑—É—î ¬´—Å–∏—Ä–∏–π¬ª –∫–æ–Ω—Ç—É—Ä ‚Üí —Å–ø—Ä–æ—â–µ–Ω—É –ª–∞–º–∞–Ω—É ‚Üí –≥–ª–∞–¥–∫—É –∫—Ä–∏–≤—É,
- –µ–∫—Å–ø–æ—Ä—Ç—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —É **SVG/JSON/CSV**,
- –º–∞—î **—Å—Ç—Ä–æ–≥—É** BeÃÅzier‚Äë–µ–∫—Å—Ç—Ä–∞–∫—Ü—ñ—é –∑ B‚Äëspline (–≤—Å—Ç–∞–≤–∫–∞ –≤—É–∑–ª—ñ–≤ –¥–æ –∫—Ä–∞—Ç–Ω–æ—Å—Ç—ñ *k+1*) —É **–∫—É–±—ñ—á–Ω—ñ –ë–µ–∑—å—î**.

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç (–ª–æ–∫–∞–ª—å–Ω–æ)

1. **–í—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ**
   ```bash
   pip install -r requirements.txt
   ```

2. **–ó–∞–ø—É—Å—Ç–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫**
   ```bash
   streamlit run bspline_trace_app.py
   ```

> –•–æ—á–µ—à –ø–æ–¥–≤—ñ–π–Ω–∏–º –∫–ª—ñ–∫–æ–º –±–µ–∑ –∫–æ–Ω—Å–æ–ª—ñ? –°—Ç–≤–æ—Ä–∏ –ª–∞—É–Ω—á–µ—Ä `start_app.pyw` –∞–±–æ `.bat` –∑—ñ —Å—Ç–∞—Ä—Ç–æ–º `python -m streamlit run bspline_trace_app.py`.
> –Ø–∫—â–æ —É —Ç–µ–±–µ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è **–¥–≤—ñ** –≤–∫–ª–∞–¥–∫–∏ ‚Äî –¥–æ–¥–∞–π `--server.headless=true` —ñ –≤—ñ–¥–∫—Ä–∏–≤–∞–π –±—Ä–∞—É–∑–µ—Ä –ª–∏—à–µ –∑ –ª–∞—É–Ω—á–µ—Ä–∞ (–æ–¥–Ω–∞ –≤–∫–ª–∞–¥–∫–∞).

## ‚òÅÔ∏è –î–µ–ø–ª–æ–π –Ω–∞ Streamlit Community Cloud

1. –ó–∞–ª–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –Ω–∞ GitHub.
2. –£ **streamlit.io ‚Üí Create app** –æ–±–µ—Ä–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π, –≥—ñ–ª–∫—É `main`, —ñ —Ñ–∞–π–ª `bspline_trace_app.py` —è–∫ **Main file path**.
3. (–ù–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ) —É **Advanced settings** –≤–∏—Å—Ç–∞–≤–∏ –≤–µ—Ä—Å—ñ—é Python —Ç–∞ –¥–æ–¥–∞–π secrets, —è–∫—â–æ —Ç—Ä–µ–±–∞.
4. –ù–∞—Ç–∏—Å–Ω–∏ **Deploy** ‚Äî –æ—Ç—Ä–∏–º–∞—î—à URL `https://<—ñ–º'—è>.streamlit.app`.

## üß© –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- **–ë—ñ–Ω–∞—Ä–∏–∑–∞—Ü—ñ—è**: Otsu / Adaptive / Manual (–∑ —ñ–Ω–≤–µ—Ä—Å—ñ—î—é), –¥–∞—É–Ω—Å–∫–µ–ª –ø–µ—Ä–µ–¥ –æ–±—Ä–æ–±–∫–æ—é.
- **–ú–æ—Ä—Ñ–æ–ª–æ–≥—ñ—è**: closing/opening, –∑–∞–ª–∏–≤–∞–Ω–Ω—è –¥—ñ—Ä–æ–∫, –≤–∏–¥–∞–ª–µ–Ω–Ω—è –¥—Ä—ñ–±–Ω–∏—Ö –æ–±‚Äô—î–∫—Ç—ñ–≤.
- **–ö–æ–Ω—Ç—É—Ä–∏**: –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –π —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∑–∞ –ø–ª–æ—â–µ—é; –æ–ø—Ü—ñ—è ¬´–ª–∏—à–µ –Ω–∞–π–±—ñ–ª—å—à–∏–π¬ª.
- **–°–ø—Ä–æ—â–µ–Ω–Ω—è –ª–∞–º–∞–Ω–æ—ó**: –ø–∞—Ä–∞–º–µ—Ç—Ä `tolerance`.
- **B‚Äëspline**: —Å—Ç—É–ø—ñ–Ω—å 2‚Äì5 (`degree`), –∑–≥–ª–∞–¥–∂—É–≤–∞–Ω–Ω—è `s`, –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∏–±—ñ—Ä–∫–∏.
- **–ï–∫—Å–ø–æ—Ä—Ç**:
  - **B‚Äëspline JSON (`tck`)** ‚Äî –≤—É–∑–ª–∏, –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∏, —Å—Ç—É–ø—ñ–Ω—å.
  - **SVG (poly)** ‚Äî —à–ª—è—Ö –∑ –≤—ñ–¥—Ä—ñ–∑–∫—ñ–≤ –∫—Ä—ñ–∑—å –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü—ñ—é —Å–ø–ª–∞–π–Ω—É.
  - **SVG (Bezier)** ‚Äî –∫—É–±—ñ—á–Ω—ñ –ë–µ–∑—å—î —á–µ—Ä–µ–∑ Cardinal (Catmull‚ÄëRom) –∑ `tension`.
  - **Strict SVG/JSON** ‚Äî **—Å—Ç—Ä–æ–≥–∞** BeÃÅzier‚Äë–µ–∫—Å—Ç—Ä–∞–∫—Ü—ñ—è (–≤—É–∑–ª–æ–≤–∞ –≤—Å—Ç–∞–≤–∫–∞ ‚Üí –∫—É–±—ñ–∫–∏).
  - **CSV** ‚Äî –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–æ–≤–∞–Ω—ñ —Ç–æ—á–∫–∏ (debug/–∞–Ω–∞–ª—ñ–∑).
- **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏**: —Å–∏—Å—Ç–µ–º–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (–≤—ñ—Å—å `y` –¥–æ–Ω–∏–∑—É), 1px = 1—É.–æ.
- **–í–µ–ª–∏–∫—ñ —Ñ–∞–π–ª–∏**: –ª—ñ–º—ñ—Ç –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–∂–Ω–∞ –ø—ñ–¥–≤–∏—â–∏—Ç–∏ —É `.streamlit/config.toml` (–¥–∏–≤. –Ω–∏–∂—á–µ).

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

```
.
‚îú‚îÄ bspline_trace_app.py      # –≥–æ–ª–æ–≤–Ω–∏–π –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫
‚îú‚îÄ requirements.txt          # –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ .streamlit/
‚îÇ  ‚îî‚îÄ config.toml            # –∫–æ–Ω—Ñ—ñ–≥ (–ª—ñ–º—ñ—Ç–∏, —Ç–µ–º–∞ —Ç–æ—â–æ)
‚îî‚îÄ README.md
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (.streamlit/config.toml)

–§–∞–π–ª —É–∂–µ –¥–æ–¥–∞–Ω–æ. –ó–∞ –ø–æ—Ç—Ä–µ–±–∏ –∑–º—ñ–Ω–∏ ‚Äî —Ä–µ–¥–∞–≥—É–π.

```toml
[server]
# –õ—ñ–º—ñ—Ç —Ä–æ–∑–º—ñ—Ä—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (–ú–ë). –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —É Streamlit 200.
maxUploadSize = 400

# –ü–ª–∞–≤–Ω—ñ—à–∏–π –¥–æ—Å–≤—ñ–¥ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å —É –¥–µ–≤-—Ä–µ–∂–∏–º—ñ:
fileWatcherType = "auto"

[browser]
# –Ü–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω—ñ –≤–ø–æ–¥–æ–±–∞–Ω–Ω—è, –º–æ–∂–Ω–∞ –∑–∞–ª–∏—à–∏—Ç–∏ —è–∫ —î
gatherUsageStats = false

[theme]
base = "light"   # –∞–±–æ "dark"
primaryColor = "#3366ff"
```
> –ù–∞ Community Cloud **–ø–æ—Ä—Ç/host** —ñ **headless** –∫–µ—Ä—É—é—Ç—å—Å—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ—é; —Ü—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—Ä–æ–ø–∏—Å—É–≤–∞—Ç–∏.

## üß™ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏

- –ó–∞–≤–∞–Ω—Ç–∞–∂ —Ç–µ—Å—Ç–æ–≤–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (—Å–∏–ª—É–µ—Ç). –ü–µ—Ä–µ–º–∏–∫–∞–π –º–µ—Ç–æ–¥ –±—ñ–Ω–∞—Ä–∏–∑–∞—Ü—ñ—ó —Ç–∞ –º–æ—Ä—Ñ–æ–ª–æ–≥—ñ—é –¥–æ —è–∫—ñ—Å–Ω–æ–≥–æ –∫–æ–Ω—Ç—É—Ä—É.
- –£ ¬´–ï–∫—Å–ø–æ—Ä—Ç¬ª —Å–ø—Ä–æ–±—É–π: `SVG (poly)`, `SVG (Bezier)`, `SVG (strict Bezier extraction)` —ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ JSON.
- –í—ñ–¥–∫—Ä–∏–π SVG —É –≤–µ–∫—Ç–æ—Ä–Ω–æ–º—É —Ä–µ–¥–∞–∫—Ç–æ—Ä—ñ ‚Äî –∫—Ä–∏–≤—ñ –º–∞—é—Ç—å –±—É—Ç–∏ –≥–ª–∞–¥–∫—ñ; ¬´strict¬ª –¥–∞—î —Å–µ–≥–º–µ–Ω—Ç–æ–≤–∞–Ω—ñ –∫—É–±—ñ–∫–∏ –∑ —Ç–æ—á–∫–∏ –∑–æ—Ä—É –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ B‚Äëspline.

## ‚ùì –ü–∏—Ç–∞–Ω–Ω—è / –ø–æ—Ä–∞–¥–∏

- **–î–≤—ñ –≤–∫–ª–∞–¥–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ**: –≤–∏–º–∫–Ω–∏ –∞–≤—Ç–æ‚Äë–≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —É Streamlit (`--server.headless=true`) –∞–±–æ –ø—Ä–∏–±–µ—Ä–∏ `webbrowser.open(...)` —ñ–∑ –ª–∞—É–Ω—á–µ—Ä–∞ ‚Äî –ª–∏—à –æ–¥–∏–Ω –º–µ—Ö–∞–Ω—ñ–∑–º.
- **–†–≤–∞–Ω–∏–π –∫–æ–Ω—Ç—É—Ä**: –∑–±—ñ–ª—å—à–∏—Ç–∏ `closing`, `min_hole` –∞–±–æ –¥–∞—É–Ω—Å–∫–µ–ª; —ñ–Ω–∫–æ–ª–∏ adaptive threshold –¥–∞—î –∫—Ä–∞—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
- **–ì–æ—Å—Ç—Ä—ñ –∫—É—Ç–∏**: –ø—ñ—Å–ª—è —Ñ—ñ—Ç—É —Å–ø–ª–∞–π–Ω–æ–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π ¬´strict¬ª –µ–∫—Å—Ç—Ä–∞–∫—Ü—ñ—é ‚Äî –≤–æ–Ω–∞ –Ω–µ –∑–≥–ª–∞–¥–∂—É—î –≥–µ–æ–º–µ—Ç—Ä—ñ—é –ø–æ–Ω–∞–¥ —Ç–æ, —â–æ –∑–∞–¥–∞–Ω–æ B‚Äëspline.
- **p > 3**: —Å—Ç—Ä–æ–≥–∏–π –µ–∫—Å–ø–æ—Ä—Ç –Ω–∞—Ä–∞–∑—ñ –ø—ñ–¥—Ç—Ä–∏–º—É—î `p=3` –Ω–∞–ø—Ä—è–º—É —Ç–∞ `p=2` —á–µ—Ä–µ–∑ –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è —Å—Ç—É–ø–µ–Ω—è. –î–ª—è `p>3` –≤–∏—Å—Ç–∞–≤ `degree=3` –ø–µ—Ä–µ–¥ –µ–∫—Å–ø–æ—Ä—Ç–æ–º.

## üìú –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT (–∞–±–æ –∑–º—ñ–Ω–∏—Ç—å –ø—ñ–¥ —Å–≤—ñ–π –ø—Ä–æ—î–∫—Ç).
